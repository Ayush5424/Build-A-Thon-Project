<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Touchless Gesture Control System</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Custom Styles & Variable Setup */
        :root {
            --primary-color-from: #3b82f6; /* sky-500 */
            --primary-color-to: #10b981;   /* emerald-500 */
        }
        body {
            font-family: 'Inter', sans-serif;
            /* Soft, blurred gradient background: sky blue -> white -> mint */
            background: radial-gradient(at 10% 10%, rgba(200, 230, 255, 0.5) 0%, transparent 50%),
                        radial-gradient(at 90% 90%, rgba(209, 250, 229, 0.5) 0%, transparent 50%),
                        linear-gradient(135deg, #f0f9ff, #ffffff);
            background-attachment: fixed;
            min-height: 100vh;
        }
        .glass {
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.5); /* Subtle transparency */
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.03);
        }
        .gradient-border-mask {
            /* Create a mask for the inner content to show the gradient border effect */
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            padding: 2px; /* controls the border thickness */
        }
        .glowing-indicator {
            box-shadow: 0 0 5px var(--primary-color-to);
        }

        /* Mode-specific colors defined in JS will override these defaults */
        .mode-accent { color: var(--primary-color-from); }
        .mode-bg { background-color: var(--primary-color-from); }
        .mode-gradient { background-image: linear-gradient(to right, var(--primary-color-from), var(--primary-color-to)); }
        .mode-glow { box-shadow: 0 0 10px -2px var(--primary-color-from); }
        .mode-ring { border: 2px solid var(--primary-color-from); }
    </style>
</head>
<body class="p-8 text-gray-800">

    <div id="app" class="max-w-7xl mx-auto space-y-8">

        <!-- 1. Top Header (Full width) -->
        <header class="flex flex-wrap items-center justify-between gap-4 p-6 bg-white rounded-xl shadow-lg glass">
            <div>
                <h1 class="text-4xl font-extrabold mode-accent transition-colors duration-300">Touchless Gesture Control System</h1>
                <p class="text-lg text-gray-500 mt-1 tracking-tight">Hands-Free Interaction for Hospitals ‚Ä¢ Labs ‚Ä¢ Factories</p>
            </div>
            <!-- Status Chips -->
            <div class="flex flex-wrap items-center gap-4 text-sm font-medium">
                <!-- Camera Status -->
                <div id="camera-status" class="flex items-center space-x-2 p-2 rounded-full transition-all duration-300 bg-gray-50 text-gray-600 ring-1 ring-gray-300">
                    <!-- Icon: Video -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4h.8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h.8"/><path d="m10 16 2-3 2 3"/></svg>
                    <span class="font-semibold">Camera: <span class="status-text">Inactive</span></span>
                    <span class="h-3 w-3 bg-gray-400 rounded-full glowing-indicator mode-bg"></span>
                </div>
                <!-- AI Engine Status -->
                <div id="ai-status" class="flex items-center space-x-2 p-2 rounded-full transition-all duration-300 bg-sky-50 text-sky-600 ring-1 ring-sky-300">
                    <!-- Icon: Cpu -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><rect x="9" y="9" width="6" height="6"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M20 15h2"/><path d="M17 17v-2"/><path d="M17 7v2"/><path d="M7 17v-2"/><path d="M7 7v2"/></svg>
                    <span class="font-semibold">AI Engine: <span class="status-text">Online</span></span>
                </div>
                <!-- User Detected Status -->
                <div id="user-status" class="flex items-center space-x-2 p-2 rounded-full transition-all duration-300 bg-blue-50 text-blue-600 ring-1 ring-blue-300">
                    <!-- Icon: User -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    <span class="font-semibold">User Detected</span>
                </div>
            </div>
        </header>

        <!-- Main Content (60/40 Split) -->
        <main class="flex flex-col md:flex-row space-y-8 md:space-y-0 md:space-x-8 h-auto md:h-[600px]">

            <!-- 2. Left Panel (60% width) ‚Äì Live Camera Feed -->
            <div class="w-full md:w-3/5 h-[400px] md:h-full">
                <div class="h-full rounded-xl p-0.5 shadow-xl transition-all duration-300
                            bg-gradient-to-br from-sky-400 to-emerald-400">
                    <!-- This div will be the main container for the video and its overlay -->
                    <div class="h-full w-full rounded-[10px] bg-gray-900 glass relative overflow-hidden">
                        
                        <!-- Video Element: Fills the container -->
                        <!-- The 'transform' class is used to flip the video horizontally, which is more intuitive for gesture control -->
                        <video id="webcam-feed" class="w-full h-full object-cover transform -scale-x-100" autoplay playsinline muted></video>

                        <!-- Placeholder/Overlay: Centered on top of the video area -->
                        <div id="video-placeholder" class="absolute inset-0 p-6 flex flex-col items-center justify-center text-gray-400 text-center space-y-4 bg-gray-50/90 glass transition-opacity duration-300">
                            <!-- Icon: Hand -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10c0 1.2-.6 2.5-2 3l-3.5 1.5a2 2 0 0 1-2-2.5v-7A2 2 0 0 1 11.5 3L16 6.5l2 3.5"/><path d="M15.5 13.5 13 19l-3.5 2h-2A1.5 1.5 0 0 1 4 19.5v-3a2.5 2.5 0 0 1 2.5-2.5h2.5"/><path d="M4 19.5v-3A2.5 2.5 0 0 1 6.5 14"/></svg>
                            <p id="video-placeholder-title" class="text-xl font-medium text-gray-500">Webcam Feed Offline</p>
                            <p id="video-placeholder-text" class="text-sm">Click "Start" to begin gesture tracking.</p>
                        </div>
                        
                        <!-- Live Tracking Label -->
                        <div class="absolute top-4 left-4 text-xs font-semibold uppercase text-gray-200 bg-black/30 px-2 py-1 rounded">Live Gesture Tracking</div>
                    </div>
                </div>
            </div>

            <!-- 3. Right Panel (40% width) ‚Äì Gesture Cards -->
            <div class="w-full md:w-2/5 space-y-4 overflow-y-auto pr-2 md:h-full h-[400px]">
                <h2 class="text-xl font-bold tracking-tight text-gray-600 mb-4">Recognized Gestures</h2>
                <!-- Card Container -->
                <div id="gesture-cards" class="space-y-4">
                    <!-- Gesture Card: Fist -->
                    <div class="gesture-card p-4 rounded-xl glass transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer">
                        <div class="flex items-center space-x-4">
                            <div class="h-12 w-12 flex-shrink-0 rounded-full flex items-center justify-center bg-white border mode-ring transition-colors duration-300 text-3xl">
                                <span>‚úä</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg mode-accent transition-colors duration-300">No Fingers (Fist)</h3>
                                <p class="text-sm text-gray-500">Action: Show Desktop (Win + D)</p>
                            </div>
                        </div>
                    </div>
                    <!-- Gesture Card: Four Fingers -->
                    <div class="gesture-card p-4 rounded-xl glass transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer">
                        <div class="flex items-center space-x-4">
                            <div class="h-12 w-12 flex-shrink-0 rounded-full flex items-center justify-center bg-white border mode-ring transition-colors duration-300 text-3xl">
                                <span>üñê</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg mode-accent transition-colors duration-300">Four Fingers</h3>
                                <p class="text-sm text-gray-500">Action: Next App (Alt + Tab)</p>
                            </div>
                        </div>
                    </div>
                    <!-- Gesture Card: Index Only -->
                    <div class="gesture-card p-4 rounded-xl glass transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer">
                        <div class="flex items-center space-x-4">
                            <div class="h-12 w-12 flex-shrink-0 rounded-full flex items-center justify-center bg-white border mode-ring transition-colors duration-300 text-3xl">
                                <span>‚òù</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg mode-accent transition-colors duration-300">Index Only</h3>
                                <p class="text-sm text-gray-500">Action: Scroll Up</p>
                            </div>
                        </div>
                    </div>
                    <!-- Gesture Card: Index + Middle -->
                    <div class="gesture-card p-4 rounded-xl glass transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer">
                        <div class="flex items-center space-x-4">
                            <div class="h-12 w-12 flex-shrink-0 rounded-full flex items-center justify-center bg-white border mode-ring transition-colors duration-300 text-3xl">
                                <span>‚úå</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg mode-accent transition-colors duration-300">Index + Middle</h3>
                                <p class="text-sm text-gray-500">Action: Scroll Down</p>
                            </div>
                        </div>
                    </div>
                    <!-- Gesture Card: Index + Middle + Ring -->
                    <div class="gesture-card p-4 rounded-xl glass transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer">
                        <div class="flex items-center space-x-4">
                            <div class="h-12 w-12 flex-shrink-0 rounded-full flex items-center justify-center bg-white border mode-ring transition-colors duration-300 text-3xl">
                                <span>ü§ü</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg mode-accent transition-colors duration-300">Index + Middle + Ring</h3>
                                <p class="text-sm text-gray-500">Action: Open App</p>
                            </div>
                        </div>
                    </div>
                    <!-- Gesture Card: Ring Only -->
                    <div class="gesture-card p-4 rounded-xl glass transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer">
                        <div class="flex items-center space-x-4">
                            <div class="h-12 w-12 flex-shrink-0 rounded-full flex items-center justify-center bg-white border mode-ring transition-colors duration-300 text-3xl">
                                <span>üíç</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg mode-accent transition-colors duration-300">Ring Only</h3>
                                <p class="text-sm text-gray-500">Action: Right Click</p>
                            </div>
                        </div>
                    </div>
                    <!-- Gesture Card: Pinky Only -->
                    <div class="gesture-card p-4 rounded-xl glass transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer">
                        <div class="flex items-center space-x-4">
                            <div class="h-12 w-12 flex-shrink-0 rounded-full flex items-center justify-center bg-white border mode-ring transition-colors duration-300 text-3xl">
                                <span>ü§ô</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg mode-accent transition-colors duration-300">Pinky Only</h3>
                                <p class="text-sm text-gray-500">Action: Left Click</p>
                            </div>
                        </div>
                    </div>
                    <!-- Gesture Card: Middle + Ring -->
                    <div class="gesture-card p-4 rounded-xl glass transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer">
                        <div class="flex items-center space-x-4">
                            <div class="h-12 w-12 flex-shrink-0 rounded-full flex items-center justify-center bg-white border mode-ring transition-colors duration-300 text-3xl">
                                <span>ü§ö</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg mode-accent transition-colors duration-300">Middle + Ring</h3>
                                <p class="text-sm text-gray-500">Action: Cursor</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </main>

        <!-- 4. Bottom Control Bar (Full width) -->
        <div class="flex flex-col sm:flex-row justify-between items-center gap-6 p-6 rounded-xl shadow-2xl glass border-t border-gray-100">

            <!-- Primary Control Buttons -->
            <div class="flex space-x-4">
                <button id="start-btn" class="px-8 py-3 rounded-full text-white font-bold text-lg shadow-xl mode-gradient transition-all duration-300 transform hover:scale-[1.05] hover:shadow-2xl">
                    Start Gesture Control
                </button>
                <button id="stop-btn" class="px-8 py-3 rounded-full text-gray-700 font-bold text-lg bg-gray-100 shadow-md ring-1 ring-gray-300 transition-all duration-300 transform hover:scale-[1.02] hover:bg-red-50">
                    Stop
                </button>
            </div>

            <!-- Mode Switching Buttons -->
            <div class="flex flex-wrap justify-center gap-3 text-lg font-semibold">
                <button data-mode="hospital" class="mode-switch-btn px-6 py-2 rounded-full ring-2 transition-all duration-300 ring-sky-300 bg-sky-50 text-sky-700 shadow-md hover:bg-sky-100">
                    Hospital Mode
                </button>
                <button data-mode="lab" class="mode-switch-btn px-6 py-2 rounded-full ring-2 transition-all duration-300 ring-gray-200 bg-white text-gray-500 shadow-md hover:ring-emerald-300 hover:bg-emerald-50 hover:text-emerald-700">
                    Lab Mode
                </button>
                <button data-mode="factory" class="mode-switch-btn px-6 py-2 rounded-full ring-2 transition-all duration-300 ring-gray-200 bg-white text-gray-500 shadow-md hover:ring-yellow-300 hover:bg-yellow-50 hover:text-yellow-700">
                    Factory Mode
                </button>
                <button class="px-6 py-2 rounded-full ring-2 transition-all duration-300 ring-gray-200 bg-white text-gray-500 shadow-md hover:ring-gray-300">
                    Select App
                </button>
            </div>
        </div>

    </div>

    <script>
        // --- JAVASCRIPT FOR MODE SWITCHING ---

        const modeConfigs = {
            hospital: {
                from: '#3b82f6', // sky-500
                to: '#10b981',   // emerald-500 (mint)
                bg_from: 'bg-sky-50',
                text: 'text-sky-700',
                ring: 'ring-sky-300',
                indicator: 'bg-sky-500'
            },
            lab: {
                from: '#10b981', // emerald-500 (mint)
                to: '#8b5cf6',   // violet-500 (purple)
                bg_from: 'bg-emerald-50',
                text: 'text-emerald-700',
                ring: 'ring-emerald-300',
                indicator: 'bg-emerald-500'
            },
            factory: {
                from: '#f59e0b', // amber-500 (yellow)
                to: '#4ade80',   // green-400
                bg_from: 'bg-yellow-50',
                text: 'text-yellow-700',
                ring: 'ring-yellow-300',
                indicator: 'bg-amber-500'
            }
        };

        let currentMode = 'hospital';

        /**
         * Applies the selected mode's styling to the UI elements.
         * @param {string} mode - The mode key ('hospital', 'lab', 'factory').
         */
        function applyMode(mode) {
            const config = modeConfigs[mode];
            if (!config) return;

            // 1. Update CSS Variables (for gradient and general accents)
            document.documentElement.style.setProperty('--primary-color-from', config.from);
            document.documentElement.style.setProperty('--primary-color-to', config.to);

            // 2. Update Mode-Switch Buttons (Highlight current mode)
            document.querySelectorAll('.mode-switch-btn').forEach(button => {
                const buttonMode = button.getAttribute('data-mode');
                // Remove all mode-specific classes first
                Object.values(modeConfigs).forEach(c => {
                    button.classList.remove(c.text, c.bg_from, c.ring);
                });

                if (buttonMode === mode) {
                    // Apply current mode styling
                    button.classList.add(config.text, config.bg_from, config.ring);
                    button.classList.remove('ring-gray-200', 'bg-white', 'text-gray-500');
                } else {
                    // Apply default/inactive styling
                    button.classList.add('ring-gray-200', 'bg-white', 'text-gray-500');
                }
            });

            // 3. Update Status Chips (Camera Status, Illustration Placeholder)
            // Note: Camera status chip color is now handled by updateStatusChip
            const illustrationPlaceholder = document.getElementById('illustration-placeholder');

            // Check if the placeholder element exists before styling it
            if (illustrationPlaceholder) {
                // Remove previous mode classes
                Object.values(modeConfigs).forEach(c => {
                    illustrationPlaceholder.classList.remove(c.ring);
                });

                // Apply new mode classes
                illustrationPlaceholder.classList.add(config.ring);
            }

            // 4. Update dynamic classes (Title, Gesture Card Icons)
            const modeAccentElements = document.querySelectorAll('.mode-accent');
            const modeRingElements = document.querySelectorAll('.mode-ring');
            const modeBgElements = document.querySelectorAll('.mode-bg'); // This is just the glowing indicator

            // Apply new classes based on config
            modeAccentElements.forEach(el => {
                Object.values(modeConfigs).forEach(c => el.classList.remove(c.text));
                el.classList.add(config.text);
            });
            modeRingElements.forEach(el => {
                Object.values(modeConfigs).forEach(c => el.classList.remove(c.ring));
                el.classList.add(config.ring);
            });
            
            // Update glowing indicator dot
            modeBgElements.forEach(el => {
                Object.values(modeConfigs).forEach(c => el.classList.remove(c.indicator));
                // Only apply if camera is active
                if (cameraStatusChip.classList.contains('bg-emerald-50')) {
                     el.classList.add(config.indicator);
                }
                // Re-apply glowing indicator to refresh glow
                el.classList.remove('glowing-indicator');
                setTimeout(() => el.classList.add('glowing-indicator'), 50);
            });

            currentMode = mode;
        }

        // --- JAVASCRIPT FOR WEBCAM & STATE ---

        // Get element references
        const startBtn = document.getElementById('start-btn');
        const stopBtn = document.getElementById('stop-btn');
        const cameraStatusChip = document.getElementById('camera-status');
        const videoElement = document.getElementById('webcam-feed');
        const videoPlaceholder = document.getElementById('video-placeholder');
        const videoPlaceholderTitle = document.getElementById('video-placeholder-title');
        const videoPlaceholderText = document.getElementById('video-placeholder-text');

        let currentStream = null;

        /**
         * Updates a status chip's appearance.
         * @param {HTMLElement} chipElement - The chip element to update.
         * @param {string} text - The new text for the status.
         * @param {'active' | 'inactive' | 'error' | 'processing'} state - The state.
         */
        function updateStatusChip(chipElement, text, state) {
            const statusTextEl = chipElement.querySelector('.status-text');
            const indicatorEl = chipElement.querySelector('.glowing-indicator');
            const currentConfig = modeConfigs[currentMode];
            
            if (statusTextEl) statusTextEl.textContent = text;

            // Remove all state classes
            chipElement.classList.remove('bg-emerald-50', 'text-emerald-600', 'ring-emerald-300', 'bg-gray-50', 'text-gray-600', 'ring-gray-300', 'bg-red-50', 'text-red-600', 'ring-red-300');
            if (indicatorEl) indicatorEl.classList.remove('bg-gray-400', 'bg-red-500', ...Object.values(modeConfigs).map(c => c.indicator));

            switch (state) {
                case 'active':
                    // Use mode-specific color for 'active'
                    chipElement.classList.add(currentConfig.bg_from, currentConfig.text, currentConfig.ring);
                    if (indicatorEl) indicatorEl.classList.add(currentConfig.indicator);
                    break;
                case 'error':
                    chipElement.classList.add('bg-red-50', 'text-red-600', 'ring-red-300');
                    if (indicatorEl) indicatorEl.classList.add('bg-red-500');
                    break;
                case 'inactive':
                default:
                    chipElement.classList.add('bg-gray-50', 'text-gray-600', 'ring-gray-300');
                    if (indicatorEl) indicatorEl.classList.add('bg-gray-400');
                    break;
            }
        }

        /**
         * Starts the webcam feed.
         */
        async function startWebcam() {
            if (currentStream) {
                console.log("Webcam already running.");
                return;
            }

            console.log("Starting Gesture Control in " + currentMode + " Mode.");
            updateStatusChip(cameraStatusChip, 'Starting...', 'processing');
            videoPlaceholder.classList.remove('opacity-0');
            videoPlaceholderTitle.textContent = "Requesting Camera Access...";
            videoPlaceholderText.textContent = "Please allow camera access in your browser.";

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'user' }, // Request user-facing camera
                    audio: false 
                });
                
                currentStream = stream;
                videoElement.srcObject = stream;
                videoElement.play(); // Ensure it plays

                // Hide placeholder once video starts playing
                videoElement.oncanplay = () => {
                    videoPlaceholder.classList.add('opacity-0'); // Hide placeholder
                    updateStatusChip(cameraStatusChip, 'Active', 'active');
                    console.log("Webcam started.");
                };

            } catch (err) {
                console.error("Error accessing webcam:", err);
                let errorMsg = "Camera access was denied.";
                if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {
                    errorMsg = "No camera was found on your device.";
                } else if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {
                    errorMsg = "Camera access was denied. Please enable it in your browser settings.";
                } else {
                    errorMsg = "An error occurred while accessing the camera.";
                }
                
                updateStatusChip(cameraStatusChip, 'Error', 'error');
                videoPlaceholderTitle.textContent = "Camera Error";
                videoPlaceholderText.textContent = errorMsg;
                videoPlaceholder.classList.remove('opacity-0'); // Ensure placeholder is visible
                currentStream = null;
            }
        }

        /**
         * Stops the webcam feed.
         */
        function stopWebcam() {
            console.log("Gesture Control Stopped.");
            if (currentStream) {
                currentStream.getTracks().forEach(track => track.stop()); // Stop all tracks in the stream
            }
            currentStream = null;
            videoElement.srcObject = null;
            videoPlaceholder.classList.remove('opacity-0'); // Show placeholder
            videoPlaceholderTitle.textContent = "Webcam Feed Offline";
            videoPlaceholderText.textContent = "Click 'Start' to begin gesture tracking.";
            updateStatusChip(cameraStatusChip, 'Inactive', 'inactive');
        }

        // --- EVENT LISTENERS ---

        // Event Listeners for Mode Buttons
        document.querySelectorAll('.mode-switch-btn').forEach(button => {
            button.addEventListener('click', () => {
                const mode = button.getAttribute('data-mode');
                applyMode(mode);
                // Re-apply camera status color in case mode changed while active
                if (currentStream) {
                    updateStatusChip(cameraStatusChip, 'Active', 'active');
                }
            });
        });

        // Event Listeners for Start/Stop
        startBtn.addEventListener('click', startWebcam);
        stopBtn.addEventListener('click', stopWebcam);

        // Initialize with Hospital Mode and Inactive Camera on load
        window.onload = () => {
            applyMode(currentMode);
            stopWebcam(); // Set initial inactive state
        }

    </script>
</body>
</html>